(this.webpackJsonpfreescoreboarddisplay=this.webpackJsonpfreescoreboarddisplay||[]).push([[0],[,,,,,,,,,,,,,function(e,t,a){e.exports=a(31)},,,,,function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(7),r=a.n(o),s=(a(18),a(2)),l=a(3),c=a(5),d=a(4),u=a(6),p=(a(19),a(9)),b=a(10),v=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t="";this.props.row&&(t=Object.keys(this.props.row).map((function(t){return i.a.createElement("td",{key:t},e.props.row[t])})));return i.a.createElement("tr",null,t)}}]),t}(n.Component),f=(a(24),a(25),a(26),a(27),a(28),a(29),a(30),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=i.a.createElement("div",null);this.props.daten&&(this.props.daten.length>0&&(e=Object.keys(this.props.daten[0]).map((function(e){return i.a.createElement("th",{key:e},e)}))));var t="";return this.props.daten&&(t=this.props.daten.map((function(e){return i.a.createElement(v,{key:e.key,row:e})}))),i.a.createElement("div",null,i.a.createElement("table",{className:this.props.tablestyle},i.a.createElement("thead",null,i.a.createElement("tr",null,e)),i.a.createElement("tbody",null,t)))}}]),t}(n.Component)),m=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).state={websocketopen:!1,DisplayObjects:[],picVariables:[],textvariablen:[],tabellenvariablen:[],pageset:"",page:"",divid:"",objpage:"",options:[],audioObjects:[]},e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.getQueryVariable("pageset"),t=this.getQueryVariable("page"),a=this.getQueryVariable("divid");this.setState({pageset:e}),this.setState({page:t}),this.setState({divid:a}),this.iniWebsocket()}},{key:"iniWebsocket",value:function(){var e=this;if(window.location.search.includes("?")){var t=window.location.hostname,a=this.constructor.getQueryVariable("wsp"),n="ws://".concat(t,":").concat(a,"/").concat("FSB");this.connection=new WebSocket(n),this.connection.onmessage=function(t){var a;try{a=JSON.parse(t.data)}catch(L){var n="[leer]";""!==t.data&&(n=t.data),console.log("parse Error: ".concat(n))}if(a){if("AN"===a.Domain&&"textvar"===a.Command){var i=a.Property,o=a.Value1,r=e.state.textvariablen,s=r.map((function(e){return e.ID})).indexOf(i);r[s].Wert=o,e.setState({textvariablen:r})}if("AN"===a.Domain&&"picvar"===a.Command){var l=a.Property,c=a.Value1,d=e.state.picVariables,u=d.map((function(e){return e.ID})).indexOf(l);d[u].Wert=c,e.setState({picVariables:d})}if("AN"===a.Domain&&"tabvar"===a.Command){var p=a.Property,b=a.Value1,v=e.state.tabellenvariablen,f=v.map((function(e){return e.ID})).indexOf(p);v[f].Wert=b,e.setState({tabellenvariablen:v})}if("AN"===a.Domain&&"DivVisibility"===a.Command){for(var m=a.Property,h=a.Value1,g=e.state.DisplayObjects,y=0;y<g.length;y+=1)if(g[y].textid===m){var S=JSON.parse(g[y].style);S.visibility=h,g[y].style=JSON.stringify(S)}e.setState({DisplayObjects:g})}if("AN"===a.Domain&&"toogleAudio"===a.Command){if(e.inIframe())return;if(!("True"===e.state.options.filter((function(e){return"AnzeigeAudio"===e.Prop}))[0].Value))return;var w="../sounds/".concat(a.Value1),O=null;if(e.state.audioObjects.length>0&&(O=e.state.audioObjects.find((function(e){return e.text===w}))),void 0===O||null===O){(O=new Audio(w)).text=w;var k=e.state.audioObjects;k.push(O),e.setState({audioObjects:k})}O.paused?O.play():(O.pause(),O.currentTime=0)}if("AN"===a.Domain&&"allAudioStop"===a.Command&&e.state.audioObjects.length>0){for(var D=0;D<e.state.audioObjects.length;D+=1){var V=e.state.audioObjects[D];V.pause(),V.currentTime=0}e.setState({audioObjects:[]})}if("JN"===a.Type){if("Reload"===a.Command&&location.reload(),"DivsActivePage"===a.Command){var x=JSON.parse(a.Value1);e.setState({DisplayObjects:x})}if("Divs"===a.Command&&e.state.pageset){var j=JSON.parse(a.Value1);e.setState({DisplayObjects:j})}if("ActivePage"===a.Command){var T=JSON.parse(a.Value1);e.setState({objpage:T})}if("Page"===a.Command){var C=JSON.parse(a.Value1);e.setState({objpage:C})}if("ListeTextVariablen"===a.Command){var P=JSON.parse(a.Value1);e.setState({textvariablen:P})}if("ListeBildVariablen"===a.Command){var N=JSON.parse(a.Value1);e.setState({picVariables:N})}if("ListeTabellenVariablen"===a.Command){var E=JSON.parse(a.Value1);e.setState({tabellenvariablen:E})}if("FontList"===a.Command){for(var J=JSON.parse(a.Value1),A=[],F=0;F<J.length;F+=1){var I=J[F],W=J[F].split(".")[0];A.push({fontfile:I,fontname:W})}for(var R=window.document.styleSheets[0],z=0;z<A.length;z+=1){var q="@font-face{font-family:'".concat(A[z].fontname,"';src:url('../../../../../fonts/").concat(J[z],"');}");R.insertRule(q,R.cssRules.length)}}if("Options"===a.Command){var B=JSON.parse(a.Value1);e.setState({options:B})}}}},this.connection.onopen=function(){e.setState({websocketopen:!0}),e.websocketSend({Type:"req",Command:"FontList"}),e.websocketSend({Type:"req",Command:"SVariablen"}),e.websocketSend({Type:"req",Command:"BVariablen"}),e.websocketSend({Type:"req",Command:"TVariablen"}),e.websocketSend({Type:"req",Command:"Options"}),e.state.page?e.websocketSend({Type:"req",Command:"Page",PageSet:e.state.pageset,Page:e.state.page}):e.websocketSend({Type:"req",Command:"ActivePage"}),e.state.page?e.websocketSend({Type:"req",Command:"Divs",PageSet:e.state.pageset,Page:e.state.page}):e.websocketSend({Type:"req",Command:"DivsActivePage"})},this.connection.onclose=function(t){e.setState({websocketopen:!1}),console.log("Serververbindung wurde getrennt. Neuer Verbindungsversuch in 1 Sekunde.",t.reason),setTimeout((function(){e.componentDidMount()}),1e3)},this.connection.onerror=function(t){console.error("Bei der Serververbindung ist folgender Fehler aufgetreten: ",t.message,"Verdindiung wird geschlossen."),e.connection.close()}}}},{key:"setBodyStyle",value:function(e){for(var t=Object.entries(e),a=0;a<t.length;a+=1)document.body.style[t[a][0]]=t[a][1]}},{key:"getQueryVariable",value:function(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a+=1){var n=t[a].split("=");if(n[0]===e)return n[1]}return!1}},{key:"onResize",value:function(){}},{key:"pxToVh",value:function(e){return(100*parseFloat(e)/parseFloat(document.documentElement.clientHeight)).toFixed(2)}},{key:"pxToVw",value:function(e){return(100*parseFloat(e)/parseFloat(document.documentElement.clientWidth)).toFixed(2)}},{key:"vhToPx",value:function(e){var t=parseFloat(document.documentElement.clientHeight)/100*parseFloat(e);return Math.round(t)}},{key:"vwToPx",value:function(e){var t=parseFloat(document.documentElement.clientWidth)/100*parseFloat(e);return Math.round(t)}},{key:"setDivPos",value:function(e,t){if(this.state.divid&&0!==this.state.DisplayObjects.length){var a=document.querySelectorAll("[data-oid='"+window.divid+"']")[0];a.style.top=e,a.style.left=t}}},{key:"websocketSend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Domain,a=void 0===t?"KO":t,n=e.Type,i=void 0===n?"bef":n,o=e.PageSet,r=void 0===o?"":o,s=e.Page,l=void 0===s?"":s,c=e.Divs,d=void 0===c?[]:c,u=e.Command,p=void 0===u?"":u,b=e.Property,v=void 0===b?"":b,f=e.Team,m=void 0===f?"":f,h=e.Player,g=void 0===h?"":h,y=e.Value1,S=void 0===y?"":y,w=e.Value2,O=void 0===w?"":w,k=e.Value3,D=void 0===k?"":k;if(window.location.search.includes("?")){var V={Domain:a,Type:i,PageSet:r,Page:l,Divs:d,Command:p,Property:v,Team:m,Player:g,Value1:S,Value2:O,Value3:D},x=JSON.stringify(V);this.connection.send(x)}}},{key:"inIframe",value:function(){try{return window.self!==window.top}catch(e){return!0}}},{key:"render",value:function(){var e=this;if(this.state.objpage){var t=JSON.parse(this.state.objpage.Style);this.setBodyStyle(t)}var a=i.a.createElement("div",{className:"websocketerror",title:"Verbindungsfehler",label:"Verbindungsfehler",onClick:this.iniWebsocket.bind(this),role:"button",tabIndex:0});this.state.websocketopen&&(a=null);var n=null;if(this.state.divid&&this.state.DisplayObjects.length>0){var o=this.state.DisplayObjects,r=o.findIndex((function(t){return t.ID.toString()===e.state.divid})),s=o[r];if(s){var l=JSON.parse(s.style),c={boxSizing:"border-box",position:"absolute",borderColor:this.state.objpage.MarkColor,borderStyle:"dashed",borderWidth:"2px",zIndex:"990",display:"flex"},d=this.state.objpage.Grid;n=i.a.createElement(b.a,{id:"mark",style:c,dragGrid:[d,d],resizeGrid:[d,d],size:{width:l.width,height:l.height},position:{x:this.vwToPx(l.left),y:this.vhToPx(l.top)},enableResizing:{top:!1,right:!0,bottom:!0,left:!1,topRight:!1,bottomRight:!0,bottomLeft:!1,topLeft:!1},onDragStart:function(e,t){},onDrag:function(t,a){var n=e.pxToVw(a.x);l.left=n+"vw";var i=e.pxToVh(a.y);l.top=i+"vh",s.style=JSON.stringify(l),o[r]=s,e.setState({DisplayObjects:o})},onDragStop:function(t,a){e.websocketSend({Domain:"DD",Type:"bef",Command:"setDivStyleString",PageSet:e.state.pageset,Page:e.state.page,Divs:[e.state.divid],Property:"style",Value1:s.style})},onResizeStart:function(t,a,n){"right"!==a&&"bottomRight"!==a||e.setState({startwidth:n.offsetWidth}),"bottom"!==a&&"bottomRight"!==a||e.setState({startheight:n.offsetHeight})},onResize:function(t,a,n,i,c){if(("right"===a||"bottomRight"===a)&&0!==i.width){var d=e.pxToVw(e.state.startwidth+i.width);l.width=d+"vw"}if(("bottom"===a||"bottomRight"===a)&&0!==i.height){var u=e.pxToVh(e.state.startheight+i.height);l.height=u+"vh"}s.style=JSON.stringify(l),o[r]=s,e.setState({DisplayObjects:o})},onResizeStop:function(t,a,n,i,o){e.websocketSend({Domain:"DD",Type:"bef",Command:"setDivStyleString",PageSet:e.state.pageset,Page:e.state.page,Divs:[e.state.divid],Property:"style",Value1:s.style})}})}}var u=this.state.DisplayObjects.map((function(t){var a=JSON.parse(t.style),n="";if("T00"!==t.tableid&&e.state.tabellenvariablen.length>0){var o=e.state.tabellenvariablen.find((function(e){return e.ID===t.tableid})).Wert;n=JSON.parse(o)}var r=t.innerText;if("S00"!==t.textid&&e.state.textvariablen.length>0&&(r=e.state.textvariablen.find((function(e){return e.ID===t.textid})).Wert),"B00"!==t.bgid&&e.state.picVariables.length>0){var s=e.state.picVariables.find((function(e){return e.ID===t.bgid})).Wert;a["background-image"]="url('../../pictures/".concat(s,"')")}if("T00"!==t.tableid){a.overflow="auto";var l=parseFloat(a["font-size"]);return a["font-size"]="".concat(l,"vw"),i.a.createElement("div",{style:a,id:t.ID,"data-textid":t.textid,"data-bgid":t.bgid,"data-tableid":t.tableid},i.a.createElement(f,{daten:n,tablestyle:t.TableStyle}))}return 0===t.Speed?i.a.createElement("div",{style:a,id:t.ID,"data-textid":t.textid,"data-bgid":t.bgid,"data-tableid":t.tableid},r):i.a.createElement("div",{style:a,id:t.ID,"data-textid":t.textid,"data-bgid":t.bgid,"data-tableid":t.tableid},i.a.createElement(p.a,{direction:"toLeft",offset:0,speed:t.Speed,move:!0,mode:"await"},(function(e){e.index;return i.a.createElement(i.a.Fragment,null,r)})))}));return i.a.createElement("div",{className:"App"},a,u,n)}}],[{key:"getQueryVariable",value:function(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a+=1){var n=t[a].split("=");if(n[0]===e)return n[1]}return!1}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[13,1,2]]]);
//# sourceMappingURL=main.60a4fcd9.chunk.js.map